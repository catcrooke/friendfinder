<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey
    </title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/88dbb9dc0d.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Survey Questions</h4>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <label for="">About You</label>
                            <input type="text" class="form-control" id="name">
                        </div>
                        <div class="form-group">
                            <label for="">Link to Photo Image</label>
                            <input type="text" class="form-control" id="photo">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <h3><strong>Question 1</strong></h3>
                <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 2</strong></h3>
                <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 3</strong></h3>
                <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 4</strong></h3>
                <h4>You rarely do something just out of sheer curiosity.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 5</strong></h3>
                <h4>People can rarely upset you.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 6</strong></h3>
                <h4>It is often difficult for you to relate to other people’s feelings.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 7</strong></h3>
                <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 8</strong></h3>
                <h4>You rarely get carried away by fantasies and ideas.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 9</strong></h3>
                <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <h3><strong>Question 10</strong></h3>
                <h4>You feel more energetic after spending time with a group of people.</h4>
                <select class="selector">
                    <option value="" selected disabled>Select An Option</option>
                    <option>5 Strongly Agree</option>
                    <option>4 Agree</option>
                    <option>3 Neutral</option>
                    <option>2 Disagree</option>
                    <option>1 Strongly Disagree</option>
                </select>
                <br>
                <br>
            </div>
        </div>
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i> Submit
        </button>
        <hr>
    </div>
    <footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/catcrooke/friendfinder">Github Repo</a></p>
        </div>
    </footer>
    <!-- Button trigger modal -->
    <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Friend Found
</button>
 -->
    <!-- Modal -->
    <div class="modal fade" id="matchModal" tabindex="-1" role="dialog" aria-labelledby="friendModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="friended">Friend Found</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- title in the name -->
                    <!-- img tag in the body -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script type="text/javascript">
// on click event to submit the users answers 
$("#submit").on("click", function() {
    // initialize the array of scores from the user as an empty array where they will be stored on click
    var scoresArray = [];
    // call the selector class of the dropdown questions and for each index of the answer the user selects,
    // run a function with the index and that selected answer which takes each score at each index and returns the numeric value at that index and adds it to the scoresArray for that user
    $(".selector :selected").each(function(i, selected) {
        scoresArray[i] = $(selected).text().charAt(0);
    });
    // code to prevent the submit button from submitting the form
    event.preventDefault();
    // set a variable formIsValid equal to true 
    var formIsValid = true;
    // run a for loop to loop over the scoresArray
    for (var i = 0; i < scoresArray.length; i++) {
        // if the user has not selected an answer for each index
        if (!scoresArray[i]) {
            // the variable formIsValid is false
            formIsValid = false;
        }
    }
    // set a variable name equal to the id of the name input and take the value inputed and remove all blank spaces from it
    var name = $("#name").val().trim();
    // if there is no name in the form
    if (!name) {
        // the variable formIsValid is false
        formIsValid = false;
    }
    //  // set a variable name equal to the id of the photo input and take the value inputed and remove all blank spaces from it
    var photo = $("#photo").val().trim();
    // if there is no text in the photo field of the form
    if (!photo) {
        // the variable formIsValid is false
        formIsValid = false;
    }
    // if the formisValid
    if (formIsValid) {
        // create a new newFriend object that holds the name, photo, and array of answers (scoresArray) of the user
        var newFriend = {
            name: name,
            photo: photo,
            scores: scoresArray
        };
        // call the addFriend function and pass in this newFriend object as a parameter
        addFriend(newFriend);
        // otherwise
    } else {
        // alert the user to return to the page and answer all of the questions
        alert("Please go back and answer all questions!");
        // end the function
        return;
    }
    // create a function addFriend and pass newFriend in as an argument
    function addFriend(newFriend) {
        // get the current location of the root page
        var currentURL = window.location.origin;
        // post with the parameters currentURL and add the /api/friends directory and a function which 
        // passes data through it as a parameter
        $.post(currentURL + "/api/friends", newFriend,
            function(data) {
                // code for the modal to display the requested information
                $('#matchModal').modal('show');
            });
    }
});
</script>
